#!/bin/sh

# [Gedit Tool]
# Name=Build
# Name[af]=Bou
# Name[an]=Construir
# Name[ar]=Ø§Ø¨Ù†Ù
# Name[as]=à¦¬à¦¿à¦²à§à¦¡
# Name[ast]=ConstrucciÃ³n
# Name[be]=ĞŸĞ°Ğ±ÑƒĞ´Ğ¾Ğ²Ğ°
# Name[be@latin]=Buduj
# Name[bg]=ĞšĞ¾Ğ¼Ğ¿Ğ¸Ğ»Ğ¸Ñ€Ğ°Ğ½Ğµ
# Name[bn]=à¦¬à¦¿à¦²à§à¦¡
# Name[bn_IN]=à¦¬à¦¿à¦²à§à¦¡
# Name[bs]=Izgradi
# Name[ca]=Munta
# Name[ca@valencia]=Munta
# Name[crh]=Ä°nÅŸa
# Name[cs]=Sestavit
# Name[cy]=Adeiladu
# Name[da]=Byg
# Name[de]=Alles kompilieren
# Name[dz]=à½–à½Ÿà½¼à¼‹à½–à½¢à¾©à½²à½‚à½¦à¼‹
# Name[el]=Î”ÏŒÎ¼Î·ÏƒÎ·
# Name[en@shaw]=ğ‘šğ‘¦ğ‘¤ğ‘›
# Name[en_GB]=Build
# Name[eo]=Kunmeti
# Name[es]=Construir
# Name[et]=Ehitamine
# Name[eu]=Eraiki
# Name[fa]=Ø³Ø§Ø®ØªÙ†
# Name[fi]=KÃ¤Ã¤nnÃ¶s
# Name[fr]=Construire
# Name[fur]=CostruÃ¬s
# Name[ga]=TÃ³g
# Name[gd]=Togail
# Name[gl]=ConstruÃ­r
# Name[gu]=Build
# Name[he]=×‘× ×™×™×”
# Name[hi]=à¤¬à¤¿à¤²à¥à¤¡
# Name[hr]=Izgradi
# Name[hu]=Ã–sszeÃ¡llÃ­tÃ¡s
# Name[id]=Bangun
# Name[is]=ByggingarÃºtgÃ¡fa
# Name[it]=Crea
# Name[ja]=ãƒ“ãƒ«ãƒ‰
# Name[kk]=Ğ–Ğ¸Ğ½Ğ°Ñƒ
# Name[km]=áŸáŸ’áá¶á”á“á¶
# Name[kn]=à²¨à²¿à²°à³à²®à²¾à²£
# Name[ko]=ì»´íŒŒì¼í•˜ê¸°
# Name[ln]=ToÌnga
# Name[lt]=Sukurti
# Name[lv]=BÅ«vÄ“jums
# Name[mai]=à¤¨à¤¿à¤°à¥à¤®à¤¿à¤¤
# Name[mk]=Ğ˜Ğ·Ğ³Ñ€Ğ°Ğ´Ğ¸
# Name[ml]=à´¬à´¿à´³àµâ€à´¡àµ
# Name[mr]=à¤¬à¥€à¤²à¥à¤¡
# Name[my]=á€á€Šá€ºá€†á€±á€¬á€€á€º
# Name[nb]=Bygg
# Name[ne]=à¤¨à¤¿à¤°à¥à¤®à¤¾à¤£ à¤—à¤°à¥à¤¨à¥à¤¹à¥‹à¤¸à¥
# Name[nl]=Bouwen
# Name[nn]=Bygg
# Name[oc]=Construire
# Name[or]=à¬¨à¬¿à¬°à­à¬®à¬¾à¬£ à¬•à¬°à¬¨à­à¬¤à­
# Name[pa]=Build
# Name[pl]=Zbuduj
# Name[ps]=Ø¬ÙˆÚ“ÙˆÙ„
# Name[pt]=CompilaÃ§Ã£o
# Name[pt_BR]=Compilar
# Name[ro]=GenereazÄƒ
# Name[ru]=Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°
# Name[si]=à·ƒà·à¶¯à¶±à·Šà¶±
# Name[sk]=Zostavenie
# Name[sl]=Izgradi
# Name[sq]=Gjenero
# Name[sr]=Ğ˜Ğ·Ğ³Ñ€Ğ°Ğ´Ğ¸
# Name[sr@latin]=Izgradi
# Name[sv]=Bygg
# Name[ta]=à®‰à®°à¯à®µà®¾à®•à¯à®•à¯
# Name[te]=à°¬à±à°²à±à°Ÿà±
# Name[tg]=Ğ¡Ğ¾Ñ…Ñ‚Ğ°Ğ½
# Name[th]=à¸›à¸£à¸°à¸à¸­à¸šà¸ªà¸£à¹‰à¸²à¸‡
# Name[tr]=Derle
# Name[ug]=Ù‚Û‡Ø±Û‡Ø´
# Name[uk]=Ğ—Ğ±Ñ–Ñ€ĞºĞ°
# Name[vi]=XÃ¢y dá»±ng
# Name[zh_CN]=æ„å»º
# Name[zh_HK]=å»ºç«‹
# Name[zh_TW]=å»ºç«‹
# Comment=Run â€œmakeâ€ in the document directory
# Comment[be]=Ğ—Ğ°Ğ¿ÑƒÑĞº "make" Ñƒ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ·Ğµ Ğ´Ğ°ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
# Comment[ca]=Executa Â«makeÂ» al directori del document
# Comment[cs]=Spustit â€makeâ€ ve sloÅ¾ce dokumentu
# Comment[da]=Start â€œmakeâ€ i dokumentmappen
# Comment[de]=Â»makeÂ« im Dokumentenordner ausfÃ¼hren
# Comment[en_GB]=Run â€œmakeâ€ in the document directory
# Comment[es]=Ejecutar Â«makeÂ» en la carpeta del documento
# Comment[fi]=Suorita â€œmakeâ€ asiakirjahakemistossa
# Comment[fr]=ExÃ©cuter Â«Â makeÂ Â» dans le rÃ©pertoire du document
# Comment[fur]=EseguÃ¬s â€œmakeâ€ te cartele dal document
# Comment[gl]=Executar Â«makeÂ» no cartafol de documentos
# Comment[hr]=Pokrenite "make" u direktoriju dokumenta
# Comment[hu]=A â€makeâ€ futtatÃ¡sa a dokumentum kÃ¶nyvtÃ¡rÃ¡ban
# Comment[id]=Jalankan "make" dalam direktori dokumen
# Comment[it]=Esegue Â«makeÂ» nella directory del documento
# Comment[kk]=ÒšÒ±Ğ¶Ğ°Ñ‚ Ğ±ÑƒĞ¼Ğ°ÑÑ‹Ğ½Ğ´Ğ° "make" Ğ¶Ó©Ğ½ĞµĞ»Ñ‚Ñƒ
# Comment[ko]=ë¬¸ì„œ ë””ë ‰í„°ë¦¬ì—ì„œ â€œmakeâ€ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤
# Comment[lt]=Paleisti â€makeâ€œ dokumento aplanke
# Comment[lv]=Palaist â€œmakeâ€ dokumenta direktorijÄ
# Comment[nl]=â€˜makeâ€™ uitvoeren in de documentmap
# Comment[pa]=à¨¡à©Œà¨•à©‚à¨®à©ˆà¨‚à¨Ÿ à¨¡à¨¾à¨‡à¨°à©ˆà¨•à¨Ÿà¨°à©€ 'à¨š â€makeâ€ à¨šà¨²à¨¾à¨“
# Comment[pl]=Wykonuje â€makeâ€ wÂ katalogu dokumentu
# Comment[pt_BR]=Executa â€œmakeâ€ no diretÃ³rio do documento
# Comment[ro]=ExecutÄƒ comanda â€makeâ€ Ã®n dosarul documentului
# Comment[ru]=Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Â«makeÂ» Ğ² ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğµ Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼
# Comment[sk]=SpustiÅ¥ â€makeâ€œ v adresÃ¡ri dokumentu
# Comment[sl]=ZaÅ¾eni ukaz Â»makeÂ« v mapi dokumenta
# Comment[sr]=Ğ˜Ğ·Ğ²Ñ€ÑˆĞ¸ Ğ½Ğ°Ñ€ĞµĞ´Ğ±Ñƒ â€makeâ€œ Ñƒ Ñ„Ğ°ÑÑ†Ğ¸ĞºĞ»Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ğ°Ñ‚Ğ°
# Comment[sr@latin]=IzvrÅ¡i naredbu â€makeâ€œ u fascikli dokumenata
# Comment[sv]=KÃ¶r â€makeâ€ i dokumentkatalogen
# Comment[tr]=Belge dizininde â€œmakeâ€ komutunu Ã§alÄ±ÅŸtÄ±r
# Comment[vi]=Cháº¡y lá»‡nh â€œmakeâ€ trong thÆ° má»¥c tÃ i liá»‡u
# Comment[zh_CN]=åœ¨æ–‡æ¡£ç›®å½•ä¸­è¿è¡Œâ€œmakeâ€
# Comment[zh_TW]=åœ¨æ–‡ä»¶è³‡æ–™å¤¾ä¸­åŸ·è¡Œã€Œmakeã€æŒ‡ä»¤
# Input=nothing
# Output=output-panel
# Shortcut=<Control>F8
# Applicability=local
# Save-files=all
# Languages=

EHOME=`echo $HOME | sed "s/#/\#/"`
DIR=$GEDIT_CURRENT_DOCUMENT_DIR
while test "$DIR" != "/"; do
    for m in GNUmakefile makefile Makefile; do
        if [ -f "${DIR}/${m}" ]; then
            echo "Using ${m} from ${DIR}" | sed "s#$EHOME#~#" > /dev/stderr
            make -C "${DIR}"
            exit
        fi
    done
    DIR=`dirname "${DIR}"`
done
echo "No Makefile found!" > /dev/stderr
