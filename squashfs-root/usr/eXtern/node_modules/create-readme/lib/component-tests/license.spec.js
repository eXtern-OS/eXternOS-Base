// Generated by CoffeeScript 1.10.0
(function() {
  var mockFs, proxyquire;

  proxyquire = require('proxyquire');

  mockFs = require('mock-fs');

  describe("A LicenseParser", function() {
    var pkg;
    pkg = null;
    beforeEach(function() {
      pkg = require('../../package.json');
      pkg.license = "MIT";
      return pkg.git = {
        user: "dbartholomae",
        repo: "readme-creator",
        branch: "master"
      };
    });
    it("returns a full license object if the license file is found", function() {
      var LicenseParser, licenseParser;
      LicenseParser = proxyquire('../components/license.coffee', {
        fs: mockFs.fs({
          'LICENSE.txt': "All your codebase are belong to us!!!11"
        })
      });
      licenseParser = new LicenseParser();
      return expect(licenseParser.run(pkg)).to.eventually.deep.equal({
        name: 'MIT',
        file: 'LICENSE.txt'
      });
    });
    it("returns a license object without file if no license file is found", function() {
      var LicenseParser, licenseParser;
      LicenseParser = proxyquire('../components/license.coffee', {
        fs: mockFs.fs()
      });
      licenseParser = new LicenseParser();
      return expect(licenseParser.run(pkg)).to.eventually.deep.equal({
        name: 'MIT',
        file: ''
      });
    });
    it("returns null if license is not set", function() {
      var LicenseParser, licenseParser;
      pkg.license = null;
      LicenseParser = proxyquire('../components/license.coffee', {
        fs: mockFs.fs()
      });
      licenseParser = new LicenseParser();
      return expect(licenseParser.run(pkg)).to.eventually.equal(null);
    });
    return it("can be configured via options", function() {
      var LicenseParser, licenseParser;
      LicenseParser = proxyquire('../components/license.coffee', {
        fs: mockFs.fs({
          'LICENSE.md': "All your codebase are belong to us!!!11"
        })
      });
      licenseParser = new LicenseParser({
        licenseFile: 'LICENSE.md'
      });
      return expect(licenseParser.run(pkg)).to.eventually.deep.equal({
        name: 'MIT',
        file: 'LICENSE.md'
      });
    });
  });

}).call(this);
