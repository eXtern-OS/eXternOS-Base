// Generated by CoffeeScript 1.10.0
(function() {
  var OptionsParser, logger,
    hasProp = {}.hasOwnProperty;

  logger = require('./logger');

  module.exports = OptionsParser = (function() {
    function OptionsParser() {
      void 0;
    }

    OptionsParser.prototype.parse = function(pkg, options) {
      var key, ref, ref1, val;
      logger.info("Parsing options");
      if (options == null) {
        options = {};
      }
      if (((ref = pkg.config) != null ? ref.readme : void 0) != null) {
        logger.silly("------------------------------------------------");
        logger.silly("Options read from package.json config");
        ref1 = pkg.config.readme;
        for (key in ref1) {
          if (!hasProp.call(ref1, key)) continue;
          val = ref1[key];
          if (!(options[key] == null)) {
            continue;
          }
          logger.silly(key + ": " + val);
          options[key] = val;
        }
        logger.silly("------------------------------------------------");
      }
      options.git = pkg.git;
      if (options.filename == null) {
        options.filename = './README.md';
      }
      logger.silly("------------------------------------------------");
      logger.silly("General options:");
      logger.silly(JSON.stringify(options, null, 2));
      logger.silly("------------------------------------------------");
      return options;
    };

    return OptionsParser;

  })();

}).call(this);
